<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAMBA CLIPS TRACKER</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff4444">

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

    <section id="home-view" class="app-view active">
        <div class="container">
            <div class="hero-content" style="padding-top: 60px; text-align: center;">
                <h1>MAMBA <span class="highlight">CLIPPERS</span></h1>
                <p style="color: #aaa; margin-bottom: 40px;">Select your assigned companion</p>
            </div>
            
            <div class="services-grid user-select-grid">
                <div class="service-card user-card" onclick="openDashboard('Dikshansh')">
                    <div class="service-icon"><div class="dot-icon"></div></div>
                    <h3>DIKSHANSH</h3>
                    <p>Mamba Mentality Perpetuator</p>
                </div>

                <div class="service-card user-card" onclick="openDashboard('Aditya')">
                    <div class="service-icon"><div class="dot-icon"></div></div>
                    <h3>ADITYA</h3>
                    <p>Future Civil Services</p>
                </div>

                <div class="service-card user-card" onclick="openDashboard('Anurag')">
                    <div class="service-icon"><div class="dot-icon"></div></div>
                    <h3>ANURAG</h3>
                    <p>Gangstar â˜… - Too Sexy Phisique</p>
                </div>
            </div>
            
            <div id="install-container-home" class="hidden" style="text-align: center; margin-top: 40px; margin-bottom: 20px;">
                <button class="cta-button pwa-install-btn" onclick="installPWA()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 10px; vertical-align: middle;">
                        <path d="M12 16L12 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9 13L12 16L15 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M17 16V16.8C17 17.9201 17 18.4802 16.782 18.908C16.5903 19.2843 16.2843 19.5903 15.908 19.782C15.4802 20 14.9201 20 13.8 20H10.2C9.07989 20 8.51984 20 8.09202 19.782C7.71569 19.5903 7.40973 19.2843 7.21799 18.908C7 18.4802 7 17.9201 7 16.8V16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7.00018 4H17.0002C18.8858 4 19.8286 4 19.8286 4 20.4144 4.58579C21.0002 5.17157 21.0002 6.11438 21.0002 8V16C21.0002 17.8856 21.0002 18.8284 20.4144 19.4142C19.8286 20 18.8858 20 17.0002 20H7.00018C5.11456 20 4.17175 20 3.58597 19.4142C3.00018 18.8284 3.00018 17.8856 3.00018 16V8C3.00018 6.11438 3.00018 5.17157 3.58597 4.58579C4.17175 4 5.11456 4 7.00018 4Z" stroke="currentColor" stroke-width="2" opacity="0.3"/>
                    </svg>
                    INSTALL APP
                </button>
            </div>
        </div>
    </section>

    <section id="dashboard-view" class="app-view hidden">
        <nav class="navbar" style="position: sticky;">
            <div class="nav-container">
                <div class="logo-area" style="display: flex; align-items: center; gap: 10px;">
                    <div id="nav-logo-group" style="display: flex; align-items: center; gap: 10px;">
                        <div class="logo" onclick="goHome()" style="cursor: pointer; margin-right: 5px;">
                            <span style="color: #ff4444;">&#8592;</span> <span id="current-user-name">USER</span>
                        </div>
                        
                        <button id="refresh-btn" class="refresh-btn" onclick="refreshStats()">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M23 4v6h-6"></path>
                                <path d="M1 20v-6h6"></path>
                                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                            </svg>
                            <span>REFRESH</span>
                        </button>

                        <div class="dropdown-container">
                            <button id="sort-btn" class="refresh-btn" onclick="toggleSortMenu()">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="21" y1="10" x2="3" y2="10"></line>
                                    <line x1="21" y1="6" x2="3" y2="6"></line>
                                    <line x1="21" y1="14" x2="3" y2="14"></line>
                                    <line x1="21" y1="18" x2="3" y2="18"></line>
                                </svg>
                                <span>SORT</span>
                            </button>
                            <div id="sort-menu" class="dropdown-menu hidden" style="top: 35px; left: 0; right: auto; min-width: 120px;">
                                <div class="dropdown-item" onclick="setSort('newest')">Newest First</div>
                                <div class="dropdown-item" onclick="setSort('oldest')">Oldest First</div>
                                <div class="dropdown-item" onclick="setSort('views')">Most Views</div>
                                <div class="dropdown-item" onclick="setSort('name')">Name (A-Z)</div>
                            </div>
                        </div>
                    </div>

                    <div id="selection-actions" class="hidden" style="display: flex; align-items: center;">
                        <button class="cta-button" onclick="exitSelectionMode()" style="padding: 6px 15px; border-width: 1px; font-size: 12px; display: flex; align-items: center; gap: 5px;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            CANCEL
                        </button>
                    </div>

                </div>

                <div class="nav-dots">
                    <div class="dot" id="passwords-btn" onclick="openPasswordsModal()" 
                        style="cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" 
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M17 7C17.7956 7 18.5587 7.31607 19.1213 7.87868C19.6839 8.44129 20 9.20435 20 10V14C20 15.3261 19.4732 16.5979 18.5355 17.5355C17.5979 18.4732 16.3261 19 15 19H9C7.67392 19 6.40215 18.4732 5.46447 17.5355C4.52678 16.5979 4 15.3261 4 14V10C4 8.67392 4.52678 7.40215 5.46447 6.46447C6.40215 5.52678 7.67392 5 9 5H15C15.7956 5 16.5587 5.31607 17.1213 5.87868C17.6839 6.44129 18 7.20435 18 8V8" 
                            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 12V12.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>

                    <div class="dot" id="settings-btn" onclick="openProfileSettings()" 
                        style="cursor: pointer; display: flex; align-items: center; justify-content: center;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" 
                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19.6224 10.3954L18.5247 7.7448L20 6L18 4L16.2647 5.48295L13.5578 4.36974L12.9353 2H10.981L10.3491 4.40113L7.70441 5.51596L6 4L4 6L5.45337 7.78885L4.3725 10.4463L2 11V13L4.40111 13.6555L5.51575 16.2997L4 18L6 20L7.79116 18.5403L10.397 19.6123L11 22H13L13.6045 19.6132L16.2551 18.5155C16.6969 18.8313 18 20 18 20L20 18L18.5159 16.2494L19.6139 13.598L21.9999 12.9772L22 11L19.6224 10.3954Z" 
                                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="dot" id="loading-indicator" style="background: transparent;"></div>
                </div>
            </div>
        </nav>

        <div class="container" style="padding-bottom: 100px;">
            <div id="profiles-container"></div>
            <button id="main-fab" class="cta-button fab-btn" onclick="handleFabClick()">+ ADD VIDEO</button>
        </div>

        <div class="bottom-nav">
            <div class="nav-item active" onclick="switchPlatform('TikTok', this)">
                TIKTOK
            </div>
            <div class="nav-item" onclick="switchPlatform('Instagram', this)">
                INSTAGRAM
            </div>
        </div>
    </section>

    <div id="add-modal" class="modal-overlay hidden">
        <div class="modal-content testimonial-card">
            <h3>ADD NEW VIDEO</h3>
            <select id="new-profile-select" class="mamba-input"></select>
            <input type="text" id="new-title" placeholder="Video Title" class="mamba-input">
            <input type="text" id="new-link" placeholder="Video Link" class="mamba-input">
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="cta-button" onclick="submitNewVideo()">SAVE</button>
                <button class="cta-button" style="border-color: #444; color: #aaa;" onclick="toggleAddModal(false)">CANCEL</button>
            </div>
        </div>
    </div>

    <div id="edit-video-modal" class="modal-overlay hidden">
        <div class="modal-content testimonial-card">
            <h3>EDIT VIDEO</h3>
            <select id="edit-profile-select" class="mamba-input"></select>
            <input type="text" id="edit-title" placeholder="Video Title" class="mamba-input">
            <input type="text" id="edit-link" placeholder="Video Link" class="mamba-input">
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="cta-button" onclick="saveVideoEdit()">UPDATE</button>
                <button class="cta-button" style="border-color: #444; color: #aaa;" onclick="toggleEditVideoModal(false)">CANCEL</button>
            </div>
        </div>
    </div>

    <div id="profile-settings-modal" class="modal-overlay hidden">
        <div class="modal-content testimonial-card">
            <h3>Edit Profile Names</h3>
            <p style="color: #aaa; font-size: 12px; margin-bottom: 20px;" id="profile-settings-info"></p>
            
            <input type="text" id="profile-name-1" placeholder="Profile 1 Name" class="mamba-input">
            <input type="text" id="profile-name-2" placeholder="Profile 2 Name" class="mamba-input">
            <input type="text" id="profile-name-3" placeholder="Profile 3 Name" class="mamba-input">
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="cta-button" onclick="saveProfileNames()">SAVE CHANGES</button>
                <button class="cta-button" style="border-color: #444; color: #aaa;" onclick="toggleProfileSettingsModal(false)">CANCEL</button>
            </div>
            
            <div id="install-container-settings" class="hidden" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #333; width: 100%;">
                <button class="cta-button pwa-install-btn" onclick="installPWA()" style="width: 100%; display: flex; align-items: center; justify-content: center; border-style: dashed;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="margin-right: 10px;">
                        <path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0 1.94-1.515L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    INSTALL TO HOMESCREEN
                </button>
            </div>
        </div>
    </div>

    <div id="passwords-modal" class="modal-overlay hidden">
        <div class="modal-content testimonial-card" style="max-width: 500px; max-height: 80vh; overflow-y: auto;">
            <h3>PASSWORDS LOG</h3>
            <div id="passwords-container" style="margin-top: 20px;"></div>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="cta-button" onclick="togglePasswordsModal(false)">CLOSE</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="smm-script.js"></script>
    <script>
    // Service worker registration
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('SW registered'))
                .catch(err => console.log('SW error:', err));
        });
    }
    </script>
</body>
</html>
